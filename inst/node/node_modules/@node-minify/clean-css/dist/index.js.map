{"version":3,"sources":["../src/index.ts"],"sourcesContent":["/*!\n * node-minify\n * Copyright(c) 2011-2023 Rodolphe Stoclin\n * MIT Licensed\n */\n\n/**\n * Module dependencies.\n */\nimport CleanCSS from 'clean-css';\nimport { utils } from '@node-minify/utils';\nimport { MinifierOptions } from '@node-minify/types';\n\n/**\n * Run clean-css.\n *\n * @param {Object} settings\n * @param {String} content\n * @param {Function} callback\n */\nconst minifyCleanCSS = ({ settings, content, callback, index }: MinifierOptions) => {\n  if (settings && settings.options && settings.options.sourceMap) {\n    settings.options._sourceMap = settings.options.sourceMap;\n    settings.options.sourceMap = true;\n  }\n  const _cleanCSS = new CleanCSS(settings && settings.options).minify(content || '');\n  const contentMinified = _cleanCSS.styles;\n  if (_cleanCSS.sourceMap && settings && settings.options && typeof settings.options._sourceMap === 'object') {\n    utils.writeFile({\n      file: settings.options._sourceMap.url ? settings.options._sourceMap.url : '',\n      content: _cleanCSS.sourceMap.toString(),\n      index\n    });\n  }\n  if (settings && !settings.content && settings.output) {\n    settings.output && utils.writeFile({ file: settings.output, content: contentMinified, index });\n  }\n  if (callback) {\n    return callback(null, contentMinified);\n  }\n  return contentMinified;\n};\n\n/**\n * Expose `minifyCleanCSS()`.\n */\nminifyCleanCSS.default = minifyCleanCSS;\nexport = minifyCleanCSS;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AASA,uBAAqB;AACrB,mBAAsB;AAUtB,IAAM,iBAAiB,CAAC,EAAE,UAAU,SAAS,UAAU,MAAM,MAAuB;AAClF,MAAI,YAAY,SAAS,WAAW,SAAS,QAAQ,WAAW;AAC9D,aAAS,QAAQ,aAAa,SAAS,QAAQ;AAC/C,aAAS,QAAQ,YAAY;AAAA,EAC/B;AACA,QAAM,YAAY,IAAI,iBAAAA,QAAS,YAAY,SAAS,OAAO,EAAE,OAAO,WAAW,EAAE;AACjF,QAAM,kBAAkB,UAAU;AAClC,MAAI,UAAU,aAAa,YAAY,SAAS,WAAW,OAAO,SAAS,QAAQ,eAAe,UAAU;AAC1G,uBAAM,UAAU;AAAA,MACd,MAAM,SAAS,QAAQ,WAAW,MAAM,SAAS,QAAQ,WAAW,MAAM;AAAA,MAC1E,SAAS,UAAU,UAAU,SAAS;AAAA,MACtC;AAAA,IACF,CAAC;AAAA,EACH;AACA,MAAI,YAAY,CAAC,SAAS,WAAW,SAAS,QAAQ;AACpD,aAAS,UAAU,mBAAM,UAAU,EAAE,MAAM,SAAS,QAAQ,SAAS,iBAAiB,MAAM,CAAC;AAAA,EAC/F;AACA,MAAI,UAAU;AACZ,WAAO,SAAS,MAAM,eAAe;AAAA,EACvC;AACA,SAAO;AACT;AAKA,eAAe,UAAU;AACzB,iBAAS;","names":["CleanCSS"]}